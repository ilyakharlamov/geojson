<!DOCTYPE html>
<html lang="en"><head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="css/leaflet.css" />
	<link rel="stylesheet" href="css/css.css" />

	<script src="js/leaflet.js"></script>
	<script src="js/leaflet-hash.js"></script>
	<script src="js/d3.v3.min.js" charset="utf-8"></script>
	<script src="js/TileLayer.d3_geoJSON.js"></script>

</head><body>

<div id="map"></div>

<script>

	function init (constants) {
		console.log("constants", constants);
		map = L.map(map).setView([47.0576, 6.9563], constants.maxzoom);
		var hash = new L.Hash(map);
		map._initPathRoot();
		var geojsonURL = "/api/1/map-version/"+constants.mapversion+"/vector/{z}/{x}/{y}.json";
		new L.TileLayer.d3_geoJSON(geojsonURL, {class:"river"}).addTo(map);
	}

	
</script>
<script src="/api/1/constants?callback=init"></script>
</body></html>